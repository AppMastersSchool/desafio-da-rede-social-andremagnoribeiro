{"ast":null,"code":"import _classCallCheck from \"/home/andre/REACT/desafio-da-rede-social-andremagnoribeiro/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/andre/REACT/desafio-da-rede-social-andremagnoribeiro/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/andre/REACT/desafio-da-rede-social-andremagnoribeiro/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/andre/REACT/desafio-da-rede-social-andremagnoribeiro/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/andre/REACT/desafio-da-rede-social-andremagnoribeiro/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/andre/REACT/desafio-da-rede-social-andremagnoribeiro/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/andre/REACT/desafio-da-rede-social-andremagnoribeiro/src/components/post.js\";\nimport React, { Component } from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport LikeIcon from '@material-ui/icons/ThumbUp';\nimport Avatar from '@material-ui/core/Avatar';\nimport axios from 'axios';\nimport \"../post.css\";\n\nvar Post =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Post, _Component);\n\n  function Post(props) {\n    var _this;\n\n    _classCallCheck(this, Post);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Post).call(this, props));\n    _this.state = {\n      likes: props.post.initialLikes\n    };\n    _this.doLike = _this.doLike.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.saveLikesInAPI = _this.saveLikesInAPI.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Post, [{\n    key: \"doLike\",\n    value: function doLike() {\n      var _this2 = this;\n\n      this.setState({\n        likes: this.state.likes + 1\n      }, function () {\n        console.log(\"after\");\n        console.log(\"doLike state\", _this2.state);\n\n        _this2.saveLikesInStorage();\n      });\n    }\n  }, {\n    key: \"saveLikesInAPI\",\n    value: function saveLikesInAPI() {\n      var _this3 = this;\n\n      var post = this.props.post;\n      post.initialLikes = this.state.likes + 1;\n      axios.put('http://localhost:3001/posts/' + post.id, post).then(function (response) {\n        _this3.setState({\n          likes: _this3.state.likes + 1\n        });\n      });\n    }\n  }, {\n    key: \"saveLikesInStorage\",\n    value: function saveLikesInStorage() {\n      var _this4 = this;\n\n      var posts = JSON.parse(localStorage.getItem('savedPosts'));\n      var updatePosts = posts.map(function (savedPost) {\n        if (savedPost.time === _this4.props.post.time) {\n          savedPost.initialLikes = _this4.state.likes;\n        }\n\n        return savedPost;\n      });\n      localStorage.setItem('savedPosts', JSON.stringify(updatePosts));\n      console.table(updatePosts);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var post = this.props.post;\n      console.log(this.props);\n      return React.createElement(Card, {\n        style: {\n          margin: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(CardContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"h5\",\n        component: \"h2\",\n        onClick: function onClick() {\n          return _this5.props.onNavigate();\n        },\n        style: {\n          cursor: 'pointer'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, post.content), React.createElement(Typography, {\n        color: \"textSecondary\",\n        variant: \"h5\",\n        component: \"h5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, post.author), React.createElement(\"small\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, post.time)), React.createElement(CardActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: likeLine,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \"Likes: \", this.state.likes), React.createElement(IconButton, {\n        onClick: this.saveLikesInAPI,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(LikeIcon, {\n        fontSize: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return Post;\n}(Component);\n\nvar likeLine = {\n  'display': 'flex',\n  'justifyContent': 'space-around',\n  'height': 40\n};\nexport default Post;","map":{"version":3,"sources":["/home/andre/REACT/desafio-da-rede-social-andremagnoribeiro/src/components/post.js"],"names":["React","Component","Card","CardActions","CardContent","Button","Typography","IconButton","LikeIcon","Avatar","axios","Post","props","state","likes","post","initialLikes","doLike","bind","saveLikesInAPI","setState","console","log","saveLikesInStorage","put","id","then","response","posts","JSON","parse","localStorage","getItem","updatePosts","map","savedPost","time","setItem","stringify","table","margin","onNavigate","cursor","content","author","likeLine"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport LikeIcon from '@material-ui/icons/ThumbUp'\nimport Avatar from '@material-ui/core/Avatar';\nimport axios from 'axios';\nimport \"../post.css\";\n\nclass Post extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            likes: props.post.initialLikes\n        }\n        this.doLike = this.doLike.bind(this);\n        this.saveLikesInAPI = this.saveLikesInAPI.bind(this);\n    }\n    doLike(){\n        this.setState({likes: this.state.likes + 1},()=>{\n            console.log(\"after\")\n            console.log(\"doLike state\",this.state);\n            this.saveLikesInStorage();\n        });\n    }\n    saveLikesInAPI(){\n        const post = this.props.post;\n        post.initialLikes = this.state.likes + 1;\n        axios.put('http://localhost:3001/posts/' + post.id, post).then(response => {\n            this.setState({likes: this.state.likes + 1});\n        })\n    }\n\n    saveLikesInStorage(){\n        const posts = JSON.parse(localStorage.getItem('savedPosts'));\n        const updatePosts = posts.map(savedPost => {\n             if(savedPost.time === this.props.post.time){\n                savedPost.initialLikes = this.state.likes;\n             }\n             return savedPost;\n        });\n        localStorage.setItem('savedPosts', JSON.stringify(updatePosts))        \n        console.table(updatePosts);\n    }\n    render(){\n        const post = this.props.post;\n        console.log(this.props);\n        return(\n            <Card style={{margin: 10}}>\n            <CardContent>\n           \n                <Typography \n                    variant=\"h5\" \n                    component=\"h2\"\n                onClick={()=>this.props.onNavigate()} \n                  style={{cursor:'pointer'}}\n                  >\n                  \n                {post.content}\n                </Typography>\n                <Typography \n                    color=\"textSecondary\"\n                    variant=\"h5\" \n                    component=\"h5\">\n                    {post.author}\n                    </Typography>\n                <small>{post.time}</small>\n                </CardContent>\n                <CardActions>\n                <div style={likeLine}>\n                    <p>Likes: {this.state.likes}</p>\n        \n                    <IconButton onClick={this.saveLikesInAPI}>\n                        <LikeIcon fontSize=\"large\" />\n                    </IconButton>\n                </div>\n                </CardActions>\n            </Card>\n        )\n    }\n}\n\nconst likeLine={\n    'display': 'flex',\n    'justifyContent': 'space-around',\n    'height': 40\n};\n\nexport default Post;"]},"metadata":{},"sourceType":"module"}